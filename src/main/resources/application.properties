# Common Base configuration for all the profiles
spring.main.allow-bean-definition-overriding=true
spring.application.name=umc_sp_contents
server.servlet.context-path=/
server.port=8082

# Default profile active
spring.profiles.active=develop

# AWS Configuration - Base settings
aws.region=${AWS_REGION:us-east-1}
spring.cloud.aws.region.static=${AWS_REGION:us-east-1}
spring.cloud.aws.credentials.use-default-aws-credentials-chain=true

# Secrets Manager Configuration - Disabled by default
spring.cloud.aws.secrets.enabled=${USE_AWS_SECRETS:false}
spring.cloud.aws.secrets.name=${AWS_SECRETS_NAME:umc-sp-contents-secrets}
spring.cloud.aws.secrets.fail-fast=${AWS_SECRETS_FAIL_FAST:false}

# Parameter Store Configuration - Disabled by default
spring.cloud.aws.paramstore.enabled=${USE_AWS_PARAMETERS:false}
spring.cloud.aws.paramstore.prefix=${AWS_PARAMETER_PREFIX:/umc-sp-contents}
spring.cloud.aws.paramstore.fail-fast=${AWS_PARAMETERS_FAIL_FAST:false}

# JPA common configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# Content configuration
content.search.strategy.db.enabled=true
content.language.default=es

# Exclude Elasticsearch auto-configuration when not needed - TEMPORALMENTE DESHABILITADO
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,org.springframework.boot.autoconfigure.data.elasticsearch.ReactiveElasticsearchRepositoriesAutoConfiguration,org.springframework.boot.autoconfigure.data.elasticsearch.ReactiveElasticsearchRestClientAutoConfiguration,org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRestClientAutoConfiguration

# Deshabilitar health checks de Elasticsearch
management.health.elasticsearch.enabled=false

# Common Flyway configuration
spring.flyway.enabled=true
spring.flyway.postgresql.transactional-lock=false
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# Allow Flyway to repair checksums automatically in development
spring.flyway.validate-on-migrate=false
spring.flyway.out-of-order=true

# Swagger/OpenAPI Configuration - ACTIVADO
springdoc.api-docs.path=/api-docs
springdoc.api-docs.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.doc-expansion=list
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.show-common-extensions=true
springdoc.swagger-ui.try-it-out-enabled=true
springdoc.swagger-ui.filter=true
springdoc.swagger-ui.syntax-highlight.theme=tomorrow-night
springdoc.show-actuator=false
springdoc.use-management-port=false
springdoc.default-consumes-media-type=application/json
springdoc.default-produces-media-type=application/json

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true
management.health.ping.enabled=true
management.health.diskspace.enabled=true
management.metrics.export.prometheus.enabled=true

